<!DOCTYPE html>
    <html lang="en">
    <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Create Snippet</title>
    </head>
    <body>
      <h1>Create Snippet</h1>
      <form id="snippetForm">
        <label for="componentName">Component Name:</label>
        <input type="text" id="componentName" placeholder="Component Name" required>
        <br>
        <label for="componentType">Component Type:</label>
        <select id="componentType">
          <option value="withDatasourceCheck">With Datasource Check</option>
          <option value="withDatasourceRendering">With Datasource Rendering</option>
          <option value="default">Default</option>
        </select>
        <br>
        <label for="placeholderType">Placeholder Type:</label>
        <select id="placeholderType">
          <option value="placeholder">Placeholder</option>
          <option value="dynamicPlaceholder">Dynamic Placeholder</option>
          <option value="default">None</option>
        </select>
        <br>
        <div id="fieldsContainer">
          <h3>Fields</h3>
          <button type="button" onclick="addField()">Add Field</button>
        </div>
        <br>
        <button type="submit">Create Snippet</button>
      </form>
      <script>
        const vscode = acquireVsCodeApi();

        document.getElementById('snippetForm').addEventListener('submit', (e) => {
          e.preventDefault();
          const componentName = document.getElementById('componentName').value;
          const componentType = document.getElementById('componentType').value;
          const placeholderType = document.getElementById('placeholderType').value;
          const fields = Array.from(document.querySelectorAll('.field')).map(field => ({
            label: field.querySelector('.fieldName').value,
            value: field.querySelector('.fieldType').value,
            isRequired: field.querySelector('.fieldRequired').value === 'true'
          }));
          vscode.postMessage({
            command: 'createSnippet',
            data: { componentName, componentType, placeholderType, fields }
          });
        });

        function addField() {
          const container = document.getElementById('fieldsContainer');
          const fieldDiv = document.createElement('div');
          fieldDiv.classList.add('field');
          fieldDiv.innerHTML = '<label>Field Name:</label>' +
            '<input type="text" class="fieldName" required>' +
            '<label>Field Type:</label>' +
            '<select class="fieldType">' +
                '<option value="Field&lt;string&gt;">Text</option>' +
                '<option value="ImageField">Image</option>' +
                '<option value="LinkField">Link</option>' +
            '</select>' +
            '<label>Required:</label>' +
            '<select class="fieldRequired">' +
                '<option value="true">Yes</option>' +
                '<option value="false">No</option>' +
            '</select>' +
            '<br>';
          container.appendChild(fieldDiv);
        }

        addField();
      </script>
    </body>
    </html>